---
layout: post
title: "Multi process vs Multi thread"
author: "Oizys18"
categories: [ComputerScience]
comments: true
tags: [CS,Thread,MultiProcess,MultiThread,Basic]
---
* TOC
{:toc}
* * *
- 멀티 프로세스와 멀티 스레드는 '동시에 두 가지 이상의 루틴을 실행 할 수 있는 역할'을 하는 것은 동일하다.

## 멀티 프로세스(Multi Process)

- 부모-자식 관계라고 해도 자신만의 메모리 영역을 가지게 된다.
- 환경변수와 프로세스 핸들 테이블이 상속 가능할 뿐 결국 독립적인 관계이다.
- fork를 통해 프로세스를 복사한다.
- 유닉스 계열에서 ps 명령어로 현재 수행되고 있는 프로세스를 확인할 수 있다.
- 프로세스 간의 통신을 하려면 IPC(Inter Process Communication; 세마포어, 큐, 공유메모리)를 통해야 한다.


## 멀티 스레드(Multi Thread)

- 하나의 프로세스가 다수 개의 작업을 각각 스레드를 이용하여 동시에 작동 시킬 수 있다.
- 스레드는 공유 메모리를 가진다.


## 멀티 스레드는 멀티 프로세스에 비해 상당한 이점을 가진다

- 컨텍스트 스위칭(Context Switching) 시에 공유 메모리 만큼의 시간(자원) 손실이 줄어든다.
    - 프로세스 간의 컨텍스트 스위칭시 단순히 CPU 레지스터 교체 뿐만이 아니라 RAM과 CPU사이의 캐쉬메모리에 대한 데이터 까지 초기화 되므로 상당한 부담이 발생한다.
- Stack을 제외한 모든 메모리를 공유하기 때문에 global(전역), static(정적) 변수 그리고 new, malloc에 의한 모든 자료를 공유할 수가 있다.
  - 이는 프로세스간 통신(ex.pipe)과 같이 복잡한 과정을 거치지 않고 보다 효율적인 일처리가 가능하다는 것을 뜻한다. (핸들 테이블과 환경변수는 덤이다.)

- 결국 계산기와 메모장 처럼 서로 완전히 별개의 프로그램이라면 독립적은 프로세스를 구성해야겠지만 서로 관련된 기능들은 멀티 스레드로 구현하는 것이 이득이다!


## 멀티 스레드의 효율성과 안정성 문제
- 여러 개의 스레드가 동일한 데이터 공간을 공유하면서 이들을 수정한다는 점에 필연적으로 생기는 문제이다.

- 멀티 프로세스의 방식의 프로그램에서 하나의 프로세스가 자신의 데이터 공간을 망가뜨린다면 그것은 해당 프로세스의 중단을 낳게 될 것이다. 하지만 멀티 스레드 방식의 프로그램에서는 하나의 스레드가 자신이 사용하던 데이터 공간을 망가뜨린다면 그 결과는 하나의 데이터 공간을 공유하는 모든 스레드를 작동불능 상태로 만들어 버릴 것이다. 이러한 문제에 대비하기 위해 Critical Section 기법이 존재한다.


### 참고
http://divineprocess.tistory.com/entry/Multi-Thread-구축
http://karlsenchoi.blogspot.kr/2011/02/blog-post_23.html
http://m.blog.naver.com/rja1104/220551216367